{"ast":null,"code":"var _jsxFileName = \"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/client/src/Stocks.js\";\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport API from \"./utils/API\";\n\nclass Stocks extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userInput: \"\",\n      symbols: [],\n      search: [],\n      selected: \"\"\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        userInput: event.target.value\n      }, () => {\n        this.filterStocks();\n      });\n    };\n\n    this.handleKeyPress = event => {\n      if (event.key === \"Enter\") {\n        // console.log('enter');\n        if (this.state.selected === \"\") {\n          this.setState({\n            selected: this.state.search[0].displaySymbol\n          }, () => {\n            API.getDailyStocks(this.state.selected).then(res => {// console.log(res);\n            }); // console.log(this.state.selected);\n          });\n        }\n      }\n    };\n\n    this.setSelected = event => {\n      var selected = event.target.getAttribute(\"symb\");\n      this.setState({\n        selected: selected,\n        userInput: selected\n      }, () => {\n        // console.log(this.state.selected);\n        API.getDailyStocks(this.state.selected).then(res => {// console.log(res);\n        });\n      });\n    };\n\n    this.retrieveStocks = i => {\n      if (i) {\n        i.preventDefault();\n      }\n\n      API.getStocks().then(res => {\n        var date = new Date();\n        var newDate = date.getMonth() + \"-\" + date.getDate();\n\n        if (newDate !== res.data[0].time) {\n          API.updateStocks().then(res => {\n            this.setState({\n              symbols: res.data\n            }, () => {\n              // console.log(this.state.symbols);\n              // console.log(\"updating mongo\");\n              API.updateStocksMongo(\"5f42cd52e2e4a857ad161fd1\", this.state.symbols).then(results => {// console.log(results)\n              });\n            });\n          });\n        } else {\n          this.setState({\n            symbols: res.data[0].stocks\n          }); // console.log(this.state.symbols)\n        } // console.log(res);\n\n      });\n    };\n\n    this.filterStocks = () => {\n      var data = this.state.symbols;\n      var input = this.state.userInput.toUpperCase();\n      data = data.filter(function (item) {\n        return item.description.includes(input) || item.displaySymbol.includes(input);\n      });\n      this.setState({\n        search: data\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.retrieveStocks();\n  }\n\n  render() {\n    // console.log(this.state.userInput)\n    // console.log(this.state.search)\n    return /*#__PURE__*/React.createElement(Style, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"stockBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"stockSearch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onKeyPress: this.handleKeyPress,\n      id: \"stockSearchInput\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 8\n      }\n    }), this.state.search.length < 1 || this.state.userInput === \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 8\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"autocomplete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, this.state.search.slice(0, 7).map(item => /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.setSelected,\n      symb: item.displaySymbol,\n      id: \"autocompleteOption\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.setSelected,\n      symb: item.displaySymbol,\n      id: \"symbolTicker\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }\n    }, item.displaySymbol), /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.setSelected,\n      symb: item.displaySymbol,\n      id: \"descriptionTicker\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 1\n      }\n    }, item.description.toLowerCase())))))));\n  }\n\n}\n\nconst Style = styled.section`\n#symbolTicker{\nmargin:0;\nalign-self: flex-end;\nfont-size: 0.95em;\nmargin-right: 2%;\nmargin-left: 2%;\n}\n\n#descriptionTicker{\n    margin:0;\n    text-transform: capitalize;\n    align-self: flex-end;\n    font-size: 0.7em;\n    \n}\n\n#autocompleteOption{\n   margin: 0.25% 1.5% 0 2%;\n   padding-bottom: 1%;\n\n}\n\n#autocompleteOption:hover{\n    background-color: #3b3b3b;\n    cursor: pointer;\n}\n\n#stockBox{\n    height: 32.33vh;\n    border-radius: 15px;\n    border: 1px solid #black;\n    background-color: black;\n    color:white;\n    overflow:scroll;\n\n}\n\n#autocompleteOption{\n    display: flex;\n    z-index: 100;\n}\n\n#stockSearchInput{\n    width: 94%;\n    margin: 2vh 1.5% 0 2%;\n    border-radius:5px;\n    background-color:#3b3b3b;\n    border: 0px;\n    height: 4vh;\n    color: white;\n    padding-left: 2%;\n};\n\n#stockSearchInput:focus{\n outline:0;\n decoration: none;\n};`;\nexport default Stocks;","map":{"version":3,"sources":["/Users/kristinhenno/Documents/Repositories/HomeGrid/home/client/src/Stocks.js"],"names":["React","Component","styled","API","Stocks","state","userInput","symbols","search","selected","handleChange","event","setState","target","value","filterStocks","handleKeyPress","key","displaySymbol","getDailyStocks","then","res","setSelected","getAttribute","retrieveStocks","i","preventDefault","getStocks","date","Date","newDate","getMonth","getDate","data","time","updateStocks","updateStocksMongo","results","stocks","input","toUpperCase","filter","item","description","includes","componentDidMount","render","length","slice","map","toLowerCase","Style","section"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport API from \"./utils/API\";\n\nclass Stocks extends React.Component {\n  state = {\n    userInput: \"\",\n    symbols:[],\n    search: [],\n    selected: \"\"\n  };\n\n  \n  handleChange = event => {\n    this.setState({\n      userInput: event.target.value\n    }, () => {\n        this.filterStocks();\n  });\n  }\n\n  handleKeyPress = event => {\n \n    if (event.key === \"Enter\") {\n      // console.log('enter');\n      if (this.state.selected === \"\"){\nthis.setState({\n  selected: this.state.search[0].displaySymbol\n}, ()=>\n{\n  API.getDailyStocks(this.state.selected).then(res => {\n    // console.log(res);\n  })\n  // console.log(this.state.selected);\n})\n      } \n    }\n\n  };\n\n  setSelected = event => {\n    var selected = event.target.getAttribute(\"symb\")\n    this.setState({\n      selected: selected,\n      userInput: selected\n    }, ()=>\n    {\n      // console.log(this.state.selected);\n      API.getDailyStocks(this.state.selected).then(res => {\n        // console.log(res);\n      })\n    });\n    \n\n  };\n\n  retrieveStocks = i => {\n    if (i) {\n      i.preventDefault();\n    }\n\n\n\n  API.getStocks().then(res => {\n\n    var date = new Date();\n    var newDate = date.getMonth() + \"-\" + date.getDate();\n\n    if (newDate !== res.data[0].time)\n    {\n        API.updateStocks().then(res =>\n            {\n                this.setState({\n                    symbols: res.data\n                },() => {\n                    // console.log(this.state.symbols);\n                    // console.log(\"updating mongo\");\n                    API.updateStocksMongo(\"5f42cd52e2e4a857ad161fd1\", this.state.symbols).then(results =>\n                        {\n                            // console.log(results)\n                        })\n                  })\n            })\n    } else {\n        this.setState({\n            symbols: res.data[0].stocks\n        })\n        // console.log(this.state.symbols)\n    }\n  // console.log(res);\n    });\n    \n  };\n\n  filterStocks = () => {\n\n  var data = this.state.symbols;\n  var input = this.state.userInput.toUpperCase();\n\n  data = data.filter(function (item) {\n    return (item.description.includes(input) || item.displaySymbol.includes(input));\n}); \nthis.setState({\n    search: data\n})\n  }\n \n  componentDidMount() {\n   this.retrieveStocks();\n  }\n\n  render() {\n      // console.log(this.state.userInput)\n      // console.log(this.state.search)\n    return (\n      <Style>\n          <div id=\"stockBox\">\n        <div id=\"stockSearch\">\n       <input onKeyPress={this.handleKeyPress} id=\"stockSearchInput\" onChange={this.handleChange}></input>\n       {this.state.search.length < 1 || this.state.userInput === \"\" \n       ? \n       <div></div>\n        : \n        <div id=\"autocomplete\">   \n            {\nthis.state.search.slice(0, 7).map((item) => \n<div onClick={this.setSelected} symb={item.displaySymbol} id=\"autocompleteOption\">\n    <p onClick={this.setSelected} symb={item.displaySymbol} id=\"symbolTicker\">{item.displaySymbol}</p>\n<p onClick={this.setSelected} symb={item.displaySymbol} id=\"descriptionTicker\">{item.description.toLowerCase()}</p>\n</div>\n)\n            }\n            </div>}\n        </div>\n        </div>\n      </Style>\n    );\n  }\n}\n\nconst Style = styled.section`\n#symbolTicker{\nmargin:0;\nalign-self: flex-end;\nfont-size: 0.95em;\nmargin-right: 2%;\nmargin-left: 2%;\n}\n\n#descriptionTicker{\n    margin:0;\n    text-transform: capitalize;\n    align-self: flex-end;\n    font-size: 0.7em;\n    \n}\n\n#autocompleteOption{\n   margin: 0.25% 1.5% 0 2%;\n   padding-bottom: 1%;\n\n}\n\n#autocompleteOption:hover{\n    background-color: #3b3b3b;\n    cursor: pointer;\n}\n\n#stockBox{\n    height: 32.33vh;\n    border-radius: 15px;\n    border: 1px solid #black;\n    background-color: black;\n    color:white;\n    overflow:scroll;\n\n}\n\n#autocompleteOption{\n    display: flex;\n    z-index: 100;\n}\n\n#stockSearchInput{\n    width: 94%;\n    margin: 2vh 1.5% 0 2%;\n    border-radius:5px;\n    background-color:#3b3b3b;\n    border: 0px;\n    height: 4vh;\n    color: white;\n    padding-left: 2%;\n};\n\n#stockSearchInput:focus{\n outline:0;\n decoration: none;\n};`\n\n\nexport default Stocks;\n"]},"metadata":{},"sourceType":"module"}
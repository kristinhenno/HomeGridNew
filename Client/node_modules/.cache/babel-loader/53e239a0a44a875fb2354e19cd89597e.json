{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _classCallCheck from\"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  #Google {\\n    position: absolute;\\n    margin-left: 2%;\\n  }\\n  #Bing {\\n    position: absolute;\\n    margin-left: 2%;\\n  }\\n  #Yahoo {\\n    position: absolute;\\n    margin-left: 2%;\\n  }\\n  .thumbnail {\\n    width: 31%;\\n    margin-right: 1%;\\n    margin-left: 1%;\\n  }\\n  #preferencesBox {\\n    width: 100%;\\n    margin-top: 1.2vh;\\n    text-align: left;\\n  }\\n  #text {\\n    text-align: left;\\n    width: 100%;\\n    margin-left: 2%;\\n    margin-top: 3%;\\n  }\\n  #save {\\n    border: none;\\n    border-radius: 2px;\\n    padding: 1% 3%;\\n    font-size: 0.9em;\\n    /* font-weight: 600; */\\n    margin-top: 1%;\\n    text-align: right;\\n    color: #5f6368;\\n    line-height: 16px;\\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.2);\\n    font-weight: 500;\\n    margin-right: 1%;\\n    margin-right: 2.1%;\\n    float: right;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from\"react\";import styled from\"styled-components\";import API from\"./utils/API\";import googlePic from\"./images/thumbnails/Google.png\";import bingPic from\"./images/thumbnails/Bing.png\";import yahooPic from\"./images/thumbnails/Yahoo.png\";import{getFromStorage}from\"./utils/storage\";var Preferences=/*#__PURE__*/function(_React$Component){_inherits(Preferences,_React$Component);var _super=_createSuper(Preferences);function Preferences(){var _this;_classCallCheck(this,Preferences);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userId:\"\",token:\"\",selectedOption:\"\",currentGrid:[],isLoading:false};_this.handleOptionChange=function(changeEvent){_this.setState({selectedOption:changeEvent.target.value});var selection=changeEvent.target.value;// console.log(selection);\nvar newGrid=_this.state.currentGrid.slice();//copy the array\n// console.log(e.currentTarget.dataset.name);\nvar i;for(i=0;i<newGrid.length;i++){if(newGrid[i]===\"Google\"||newGrid[i]===\"Yahoo\"||newGrid[i]===\"Bing\"){// console.log(newGrid[i]);\nnewGrid.splice(i,1,selection);// console.log(newGrid);\n_this.setState({currentGrid:newGrid});//set the new state\n// return newGrid;\n}}// // newGrid[i] = this.state.selectedOption; //execute the manipulations\n// this.setState({ currentGrid: newGrid }); //set the new state\n// console.log(this.state.currentGrid);\n};_this.retrieveGrid=function(i){if(i){i.preventDefault();}var id=_this.state.userId;API.retrieve(id).then(function(res){if(res.data.grid.length>0){// console.log(res.data.grid);\nvar gridArray=res.data.grid.map(function(item){return item.widget;});// console.log(gridArray);\n_this.setState({currentGrid:gridArray,isLoading:false});}});};_this.verify=function(i){if(i){i.preventDefault();}var obj=getFromStorage(\"the_main_app\");if(obj&&obj.token){var token=obj.token;// Verify token\nAPI.verify(token).then(function(res){if(res){// console.log(\"token checked\");\n// console.log(res);\n_this.setState({token:token,userId:res.data.userId,isLoading:true});// console.log(\"loggedIn\");\n_this.retrieveGrid();}else{_this.setState({isLoading:true});}});}else{// console.log(\"no token\");\n_this.setState({isLoading:false,isLoggedIn:false});}};_this.save=function(i){var id=_this.state.userId;// console.log(this.state.currentGrid);\n_this.setState({selected:\"\",shake:false});var grid=_this.state.currentGrid.map(function(item){return{widget:item};});// console.log(grid);\nAPI.update(id,grid).then(function(res){if(res){// console.log(\"array added\");\n_this.refreshPage();}});};return _this;}_createClass(Preferences,[{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);this.setState({needRefresh:false});}},{key:\"componentDidMount\",value:function componentDidMount(){this.verify();}},{key:\"render\",value:function render(){var _this2=this;// console.log(this.state.selectedOption);\nreturn/*#__PURE__*/React.createElement(Style,null,/*#__PURE__*/React.createElement(\"div\",{id:\"preferencesBox\"},/*#__PURE__*/React.createElement(\"p\",{id:\"text\"},\"Default Search Engine\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"Google\",name:\"search\",value:\"Google\",onChange:this.handleOptionChange,checked:this.state.selectedOption===\"Google\"}),/*#__PURE__*/React.createElement(\"label\",{for:\"Google\"},/*#__PURE__*/React.createElement(\"img\",{className:\"thumbnail\",src:googlePic})),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"Yahoo\",name:\"search\",value:\"Yahoo\",onChange:this.handleOptionChange,checked:this.state.selectedOption===\"Yahoo\"}),/*#__PURE__*/React.createElement(\"label\",{for:\"Yahoo\"},/*#__PURE__*/React.createElement(\"img\",{className:\"thumbnail\",src:yahooPic})),/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleOptionChange,checked:this.state.selectedOption===\"Bing\",type:\"radio\",name:\"search\",id:\"Bing\",value:\"Bing\"}),/*#__PURE__*/React.createElement(\"label\",{for:\"Bing\"},/*#__PURE__*/React.createElement(\"img\",{className:\"thumbnail\",src:bingPic}))),/*#__PURE__*/React.createElement(\"button\",{id:\"save\",onClick:function onClick(e){return _this2.save();}},\"save\")));}}]);return Preferences;}(React.Component);var Style=styled.section(_templateObject());export default Preferences;","map":{"version":3,"sources":["/Users/kristinhenno/Documents/Repositories/HomeGrid/home/Client/src/Preferences.js"],"names":["React","styled","API","googlePic","bingPic","yahooPic","getFromStorage","Preferences","state","userId","token","selectedOption","currentGrid","isLoading","handleOptionChange","changeEvent","setState","target","value","selection","newGrid","slice","i","length","splice","retrieveGrid","preventDefault","id","retrieve","then","res","data","grid","gridArray","map","item","widget","verify","obj","isLoggedIn","save","selected","shake","update","refreshPage","window","location","reload","needRefresh","e","Component","Style","section"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport API from \"./utils/API\";\nimport googlePic from \"./images/thumbnails/Google.png\";\nimport bingPic from \"./images/thumbnails/Bing.png\";\nimport yahooPic from \"./images/thumbnails/Yahoo.png\";\nimport { getFromStorage } from \"./utils/storage\";\n\nclass Preferences extends React.Component {\n  state = {\n    userId: \"\",\n    token: \"\",\n    selectedOption: \"\",\n    currentGrid: [],\n    isLoading: false\n  };\n\n  handleOptionChange = changeEvent => {\n    this.setState({\n      selectedOption: changeEvent.target.value\n    });\n    const selection = changeEvent.target.value;\n    // console.log(selection);\n    const newGrid = this.state.currentGrid.slice(); //copy the array\n    // console.log(e.currentTarget.dataset.name);\n\n    var i;\n    for (i = 0; i < newGrid.length; i++) {\n      if (\n        newGrid[i] === \"Google\" ||\n        newGrid[i] === \"Yahoo\" ||\n        newGrid[i] === \"Bing\"\n      ) {\n        // console.log(newGrid[i]);\n        newGrid.splice(i, 1, selection);\n        // console.log(newGrid);\n        this.setState({ currentGrid: newGrid }); //set the new state\n        // return newGrid;\n      }\n    }\n\n    // // newGrid[i] = this.state.selectedOption; //execute the manipulations\n    // this.setState({ currentGrid: newGrid }); //set the new state\n    // console.log(this.state.currentGrid);\n  };\n\n  retrieveGrid = i => {\n    if (i) {\n      i.preventDefault();\n    }\n    const id = this.state.userId;\n    API.retrieve(id).then(res => {\n      if (res.data.grid.length > 0) {\n        // console.log(res.data.grid);\n        const gridArray = res.data.grid.map(\n          item => item.widget\n        );\n        // console.log(gridArray);\n        this.setState({\n          currentGrid: gridArray,\n          isLoading: false\n        });\n      }\n    });\n  };\n\n  verify = i => {\n    if (i) {\n      i.preventDefault();\n    }\n    const obj = getFromStorage(\"the_main_app\");\n    if (obj && obj.token) {\n      const { token } = obj;\n      // Verify token\n      API.verify(token).then(res => {\n        if (res) {\n          // console.log(\"token checked\");\n          // console.log(res);\n          this.setState({\n            token: token,\n            userId: res.data.userId,\n            isLoading: true\n          });\n          // console.log(\"loggedIn\");\n          this.retrieveGrid();\n        } else {\n          this.setState({\n            isLoading: true\n          });\n        }\n      });\n    } else {\n      // console.log(\"no token\");\n      this.setState({\n        isLoading: false,\n        isLoggedIn: false\n      });\n    }\n  };\n\n  //   test = test => {\n  //     console.log(this.state.currentGrid);\n  //   };\n\n  save = i => {\n    const id = this.state.userId;\n    // console.log(this.state.currentGrid);\n\n    this.setState({ selected: \"\", shake: false });\n\n    let grid = this.state.currentGrid.map(item => {\n      return { widget: item };\n    });\n    // console.log(grid);\n\n    API.update(id, grid).then(res => {\n      if (res) {\n        // console.log(\"array added\");\n        this.refreshPage();\n      }\n    });\n  };\n  refreshPage() {\n    window.location.reload(false);\n    this.setState({\n      needRefresh: false\n    });\n  }\n\n  componentDidMount() {\n    this.verify();\n  }\n\n  render() {\n    // console.log(this.state.selectedOption);\n    return (\n      <Style>\n        <div id=\"preferencesBox\">\n          <p id=\"text\">Default Search Engine</p>\n          <div>\n            <input\n              type=\"radio\"\n              id=\"Google\"\n              name=\"search\"\n              value=\"Google\"\n              onChange={this.handleOptionChange}\n              checked={\n                this.state.selectedOption === \"Google\"\n              }\n            />\n            <label for=\"Google\">\n              <img className=\"thumbnail\" src={googlePic} />\n            </label>\n            <input\n              type=\"radio\"\n              id=\"Yahoo\"\n              name=\"search\"\n              value=\"Yahoo\"\n              onChange={this.handleOptionChange}\n              checked={\n                this.state.selectedOption === \"Yahoo\"\n              }\n            />\n\n            <label for=\"Yahoo\">\n              <img className=\"thumbnail\" src={yahooPic} />\n            </label>\n            <input\n              onChange={this.handleOptionChange}\n              checked={this.state.selectedOption === \"Bing\"}\n              type=\"radio\"\n              name=\"search\"\n              id=\"Bing\"\n              value=\"Bing\"\n            />\n            <label for=\"Bing\">\n              <img className=\"thumbnail\" src={bingPic} />\n            </label>\n          </div>\n          <button id=\"save\" onClick={e => this.save()}>\n            save\n          </button>\n        </div>\n      </Style>\n    );\n  }\n}\n\nconst Style = styled.section`\n  #Google {\n    position: absolute;\n    margin-left: 2%;\n  }\n  #Bing {\n    position: absolute;\n    margin-left: 2%;\n  }\n  #Yahoo {\n    position: absolute;\n    margin-left: 2%;\n  }\n  .thumbnail {\n    width: 31%;\n    margin-right: 1%;\n    margin-left: 1%;\n  }\n  #preferencesBox {\n    width: 100%;\n    margin-top: 1.2vh;\n    text-align: left;\n  }\n  #text {\n    text-align: left;\n    width: 100%;\n    margin-left: 2%;\n    margin-top: 3%;\n  }\n  #save {\n    border: none;\n    border-radius: 2px;\n    padding: 1% 3%;\n    font-size: 0.9em;\n    /* font-weight: 600; */\n    margin-top: 1%;\n    text-align: right;\n    color: #5f6368;\n    line-height: 16px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n    font-weight: 500;\n    margin-right: 1%;\n    margin-right: 2.1%;\n    float: right;\n  }\n`;\n\nexport default Preferences;\n"]},"metadata":{},"sourceType":"module"}